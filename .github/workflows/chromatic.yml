name: Chromatic UI Verification

on:
  # pull_request:
  push:
    branches:
      # - main # main ë¸Œëœì¹˜ë¡œì˜ PR ë°œìƒ ì‹œ ì‹¤í–‰
      - design

jobs:
  chromatic-test:
    # if: github.repository == 'prography/10th-Motimo-FE'
    if: github.repository == 'Hys-Lee/10th-Motimo-FE'
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0 # Chromaticì´ Git íˆìŠ¤í† ë¦¬ë¥¼ ë¶„ì„í•  ìˆ˜ ìˆë„ë¡ í•¨

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20" # í”„ë¡œì íŠ¸ì— ë§ëŠ” Node.js ë²„ì „

      - name: Install dependencies
        run: npm install # ë˜ëŠ” npm install

      - name: Build Storybook (ì„ íƒ ì‚¬í•­, í•„ìš”ì‹œ)
        run: npm run build-storybook # ë˜ëŠ” npm run build-storybook

      - name: Run Chromatic
        uses: chromaui/action@latest
        with:
          # ğŸ‘‡ Chromatic í”„ë¡œì íŠ¸ í† í° (Secretsì— ì €ì¥ ê¶Œì¥)
          projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}
          # ğŸ‘‡ trueë¡œ ì„¤ì •í•˜ë©´ ë¦¬ë·°ë˜ì§€ ì•Šì€ ë³€ê²½ì´ ìˆì„ ê²½ìš° CIë¥¼ ì‹¤íŒ¨ì‹œí‚´
          exitZeroOnChanges: false
